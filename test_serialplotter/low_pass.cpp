#include "low_pass.h"

void Low_pass::init(double f_c, double y_0) {
  rc = 1 / (f_c * 6.28318530718 );
  y_p = y_0;
  alpha = 0;
}

//////////////////////////////////////////////////////////////////////////////////

Low_pass::Low_pass(double f_c) {
  init(f_c, 0);
}

//////////////////////////////////////////////////////////////////////////////////

Low_pass::Low_pass(double f_c, double y_0) {
  init(f_c, y_0);
}

//////////////////////////////////////////////////////////////////////////////////

double Low_pass::update(double u, double dt) {
  alpha = dt / (dt + rc);
  y_p = u * alpha + y_p * (1 - alpha);
  return y_p;
}

//////////////////////////////////////////////////////////////////////////////////

void Low_pass::set_y0(double y_0) {
  y_p = y_0;
}